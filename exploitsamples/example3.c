#include <stdio.h>


void main() {
    char buf[100];
    char *buf2 = (char*)malloc(100);
    int i;
    for (i = 0; i < 100; i++)
    	buf2[i] = 2;
    printf("before open", fflush(NULL));
    FILE* ptr = popen(buf2, "r");
	printf("after");
    if (ptr != NULL)
    {

        while (fgets(buf, BUFSIZ, ptr) != NULL)
            printf("~>%s", buf);
        pclose(ptr);
    }
    printf("the end");
}
